<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Publicar en Facebook</title>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/es_ES/sdk.js"></script>
</head>

<body>
    <h1>Publicación en Facebook</h1>

    <input type="text" id="postText" placeholder="Escribe tu mensaje aquí">
    <button id="shareButton">Publicar en Facebook</button>

    <div id="fb-root"></div>

    <script>
        // Inicializar el SDK de Facebook
        window.fbAsyncInit = function () {
            FB.init({
                appId: '557943246675947',
                xfbml: true,
                version: 'v21.0'
            });
        };

        // Evento del botón para publicar en Facebook
        document.getElementById('shareButton').addEventListener('click', function () {
            var message = document.getElementById('postText').value;

            // Asegúrate de que el usuario haya iniciado sesión y tenga los permisos necesarios
            FB.login(function (response) {
                if (response.authResponse) {
                    // Publicar en el perfil del usuario
                    FB.api(
                        '/me/feed',
                        'POST',
                        { message: message }, // Mensaje que se va a publicar
                        function (response) {
                            if (!response || response.error) {
                                alert('Error al publicar: ' + response.error.message);
                            } else {
                                alert('Publicación exitosa con ID: ' + response.id);
                            }
                        }
                    );
                } else {
                    alert('El usuario no está autenticado.');
                }
            }, { scope: 'publish_actions' }); // Asegúrate de tener los permisos necesarios
        });
    </script>
</body>

</html>